layui.define(["table", "jquery", "form"], function (e) { "use strict"; var t = layui.jquery, a = layui.table, l = layui.form; (i = function () { this.v = "1.0.1" }).prototype.render = function (e) { var i = t(e.elem); e.searchKey = e.searchKey || "keyword", e.searchPlaceholder = e.searchPlaceholder || "关键词搜索", e.table.page = e.table.page || !0, e.table.height = e.table.height || 315, i.on("click", function (o) { if (o.stopPropagation(), t("div.tableSelect").length >= 1) return !1; var r = i.offset().top + i.outerHeight() + "px", n = i.offset().left + "px", c = "tableSelect_table_" + (new Date).getTime(), s = '<div class="tableSelect layui-anim layui-anim-upbit" style="left:' + n + ";top:" + r + ';border: 1px solid #d2d2d2;background-color: #fff;box-shadow: 0 2px 4px rgba(0,0,0,.12);padding:10px 10px 0 10px;position: absolute;z-index: 100;margin: 5px 0;border-radius: 2px;">'; s += '<div class="tableSelectBar">', s += '<form class="layui-form" action="" style="display:inline-block;">', s += '<input style="display:inline-block;width:190px;height:30px;vertical-align:middle;margin-right:-1px;border: 1px solid #C9C9C9;" type="text" name="' + e.searchKey + '" placeholder="' + e.searchPlaceholder + '" autocomplete="off" class="layui-input"><button class="layui-btn layui-btn-sm layui-btn-primary tableSelect_btn_search" lay-submit lay-filter="tableSelect_btn_search"><i class="layui-icon layui-icon-search"></i></button>', s += "</form>", s += '<button style="float:right;" class="layui-btn layui-btn-sm tableSelect_btn_select">选择</button>', s += "</div>", s += '<table id="' + c + '" lay-filter="' + c + '"></table>', s = t(s += "</div>"), t("body").append(s), e.table.elem = "#" + c; var b = a.render(e.table); l.on("submit(tableSelect_btn_search)", function (e) { return b.reload({ where: e.field, page: { curr: 1 } }), !1 }), a.on("rowDouble(" + c + ")", function (t) { var a = { data: [t.data] }; e.done(i, a), s.remove() }), s.find(".tableSelect_btn_select").on("click", function () { var t = a.checkStatus("" + c); e.done(i, t), s.remove() }), t(document).mouseup(function (a) { var l = t(e.elem + ",.tableSelect"); l.is(a.target) || 0 !== l.has(a.target).length || s.remove() }) }) }, i.prototype.hide = function (e) { t(".tableSelect").remove() }; var i = new i; t(window).scroll(function () { i.hide() }), e("tableSelect", i) });